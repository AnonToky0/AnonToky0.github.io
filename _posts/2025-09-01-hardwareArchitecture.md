---
title: "硬件结构"
date: 2025-09-01 21:00:00 +0800
categories: [操作系统]
tags: [操作系统, CPU]
---

## 冯诺依曼模型
遵循图灵机设计，定义计算机基本结构为五个部分：运算器、控制器、存储器、输入设备、输出设备。这五个部分也称为**冯诺依曼模型**。

## 内存
计算机存储数据的基本单位是字节(byte),1字节等于8位。每一个字节都对应一个内存地址。

## 中央处理器(CPU)
32位和64位的主要区别在于一次能计算多少字节数据：
- 32位CPU一次可以计算4个字节
- 64位CPU一次可以计算8个字节

- **位宽**：这里说的32位和64位，代表CPU一次可以计算的数据量。

CPU内部含有其他组件，比如**寄存器**， **控制单元**，**逻辑运算单元**。控制单元负责控制CPU工作，逻辑运算单元负责计算。
寄存器主要用于存储计算时的数据。

### 寄存器(Register)
寄存器(Register)是计算机中央处理器(CPU)内部的一种高速存储单元，用于临时存放指令、数据和地址。寄存器是CPU中访问速度最快的存储器，直接参与指令执行和数据处理。

#### 寄存器的作用
- 存储操作数和中间结果：CPU执行指令时，运算的操作数和结果通常存放在寄存器中，避免频繁访问较慢的主存。
- 存储指令地址：程序计数器（PC）寄存器保存下一条将要执行的指令地址。
- 控制程序执行流程：通过状态寄存器（标志寄存器）保存运算结果的状态（如零标志、进位标志等），影响程序分支。
- 支持上下文切换：操作系统切换进程时，会保存和恢复寄存器状态，保证进程执行的连续性。

#### 寄存器种类
- 通用寄存器： 用来存放数据和地址，供算术逻辑运算使用
- 程序计数器(PC)：保存下一条要执行指令的地址
- 指令寄存器(IR)：存放当前正在执行的指令。
- 堆栈指针(SP)： 指向当前堆栈顶的位置，支持函数调用和返回
- 基址寄存器(BP)：用于访问函数的参数和局部变量
- 状态寄存器(标志寄存器): 存放算术运算结果的状态标志，如零标志、进位标志等
- 索引寄存器： 用于数组和字符串操作，支持地址偏移

### 总线
总线用于CPU和内存及其他设备之间的通信，可分为3种：
- 地址总线: 用于指定CPU将要操作的内存地址
- 数据总线：用于读写内存的数据
- 控制总线：用于发送和接收信号，比如中断、设备复位

当CPU读写内存数据时，先通过地址总线指定内存的地址，然后通过控制总线控制是读或写命令，最后通过数据总线来传输数据。

### 线路位宽与CPU位宽
- **线路位宽**是指计算机系统中数据总线、地址总线或控制总线的宽度，即总线上一次能传输的数据位数。
- **CPU位宽**指CPU一次能够处理的数据的位数

CPU 操作 4G大的内存，一次能访问到所有内存地址，需要 32 (2^32)条地址总线。

64位x86-64架构 CPU位宽 64位，数据总线宽度 64位，地址总线宽度 48位，最大寻址空间 256TB。

